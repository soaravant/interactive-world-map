:root {
    --bg-color: #000;
    /* Space black */
    --text-color: #f8fafc;
    --text-muted: #94a3b8;
    --glass-bg: rgba(15, 23, 42, 0.6);
    --glass-border: rgba(255, 255, 255, 0.1);
    --accent: #60a5fa;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Outfit', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

#app {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    /* Hide anything panning outside */
    background: #000;
}

/* 
   We construct a "World Group" div that will be transformed by D3 Zoom.
   It contains the Image and the SVG stacked strictly on top of each other.
*/
#map-viewport {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* Centering mechanism initially */
    width: 0;
    height: 0;
    /* D3 will control visual transform on children or this container? 
       Actually, D3 Zoom usually operates on a <g> inside SVG. 
       Here we need to zoom DOM elements. We will apply the transform to this container. */
    transform-origin: 0 0;
}

/* Layers inside the viewport */
#earth-texture,
#clouds-texture,
#svg-layer {
    position: absolute;
    top: 0;
    left: 0;
    /* These dimensions will be set by JS based on natural aspect ratio 2:1 */
    pointer-events: none;
    /* Let clicks pass through images to SVG */
}

#earth-texture {
    /* Ensure image is visible */
    display: block;
    z-index: 1;
}

#svg-layer {
    pointer-events: auto;
    /* Re-enable for SVG interactions */
    z-index: 10;
}

/* Cloud Layers */
/* Cloud Layers */
/* Cloud Layers (Sprites) */
/* Cloud Layers (External Repo Style) */
#clouds-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
    overflow: hidden;
    display: none;
    /* Clouds toggled off */
}

/* 
   Matched to: .cloud img 
   - animation: cld calc(8s * var(--i)) linear infinite;
   will-change: transform;
*/
.cloud-sprite {
    position: absolute;
    opacity: 0.8;
    animation: cld calc(8s * var(--i)) linear infinite;
    will-change: transform;
}

@keyframes cld {
    0% {
        transform: translateX(-100%);
    }

    100% {
        transform: translateX(100vw);
        /* Cross entire screen */
    }
}




/* Pins - Google Maps Style */
.pin {
    fill: #4285F4;
    /* Google Blue */
    stroke: white;
    stroke-width: 1.5px;
    cursor: pointer;
    /* Drop shadow for depth */
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));

    /* Animation origin is now handled by the parent group or local transform */
    transform-origin: 12px 22px;
    /* Bottom tip of the path coordinate system */
    animation: float 2s ease-in-out infinite;
}

.pin:hover {
    fill: #1a73e8;
    /* Darker Blue */
    stroke-width: 2px;
    transform: translate(-12px, -22px) scale(1.2);
    /* Slight scale up on hover */
    animation-play-state: paused;
}

@keyframes float {

    0%,
    100% {
        transform: translate(-12px, -22px) translateY(0);
    }

    50% {
        transform: translate(-12px, -22px) translateY(-8px);
    }
}

/* Atmosphere Overlay (Static, sits on top of everything) */
#atmosphere-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(circle at center, transparent 30%, rgba(0, 0, 0, 0.6) 100%);
    box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8);
    z-index: 20;
}

/* SVG Styles */
svg {
    width: 100%;
    height: 100%;
    overflow: visible;
}

.country {
    fill: transparent;
    /* Invisible by default, showing texture behind */
    stroke: rgba(255, 255, 255, 0.4);
    /* Increased opacity from 0.1 to 0.4 */
    stroke-width: 0.5px;
    cursor: pointer;
    transition: all 0.2s;
}

.country:hover {
    fill: rgba(255, 255, 255, 0.1);
    /* Slight white highlight */
    stroke: rgba(255, 255, 255, 0.8);
    /* Brighter on hover */
}

.country.active {
    fill: rgba(37, 99, 235, 0.3);
    /* Blue tint on active */
    stroke: #60a5fa;
    stroke-width: 1px;
}

/* UI Elements */

.glass-panel {
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
}

#loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    z-index: 100;
}

.spinner {
    width: 32px;
    height: 32px;
    border: 3px solid rgba(255, 255, 255, 0.1);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Controls */
.controls {
    position: absolute;
    bottom: 2rem;
    right: 2rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    z-index: 50;
    padding: 0.5rem;
}

button {
    background: transparent;
    border: none;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    font-size: 1.25rem;
    cursor: pointer;
}

button:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Info Modal */
#info-modal {
    position: absolute;
    top: 1rem;
    left: 1rem;
    width: 280px;
    padding: 1.25rem;
    z-index: 50;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#info-modal.hidden {
    opacity: 0;
    transform: translateX(-10px);
    pointer-events: none;
}

#close-modal {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    font-size: 1.5rem;
    line-height: 1;
    width: auto;
    height: auto;
    padding: 0.25rem;
}

.modal-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

#country-flag img {
    width: 48px;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

h2 {
    font-size: 1.25rem;
    font-weight: 600;
}

.stats-grid {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding-bottom: 0.5rem;
}

.stat-item:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.label {
    color: var(--text-muted);
}